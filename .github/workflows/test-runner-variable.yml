name: 'Test: Runner Variable'

on:
  push:
    branches:
      - cat-2182

jobs:
  # Test 1: Call reusable WITHOUT passing runner (should use default)
  call-reusable-no-runner:
    name: 'Call Reusable: No Runner Passed'
    uses: ./.github/workflows/test-runner-reusable.yml
    # No runner input - should use default 'blacksmith-2vcpu-ubuntu-2204'
    # But if RUNNER_PROVIDER=github, should resolve to 'ubuntu-latest'

  # Test 2: Call reusable WITH explicit runner
  call-reusable-with-runner:
    name: 'Call Reusable: 4vcpu Passed'
    uses: ./.github/workflows/test-runner-reusable.yml
    with:
      runner: 'blacksmith-4vcpu-ubuntu-2204'

  # Test 3: Direct job for comparison
  direct-job:
    name: 'Direct Job'
    runs-on: ${{ vars.RUNNER_PROVIDER == 'github' && 'ubuntu-latest' || 'blacksmith-2vcpu-ubuntu-2204' }}
    steps:
      - name: Show runner info
        run: |
          echo "RUNNER_PROVIDER: ${{ vars.RUNNER_PROVIDER || '(not set)' }}"
          echo "Actual runner: ${{ runner.name }}"
