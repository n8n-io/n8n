/**
 * Legacy Button Styles
 *
 * @deprecated These styles support deprecated button types (success, warning, highlight, etc.)
 * and legacy props (type, outline, text, square, etc.). Use the current Button API with
 * `variant` prop instead.
 *
 * This file will be removed in a future major version.
 */

@use '../../css/mixins/utils';
@use '../../css/common/var';
@use 'sass:string';

// =============================================================================
// Legacy Base Button Mixin
// =============================================================================

@mixin n8n-button($override: false) {
	$important: if($override, !important, '');

	display: inline-block;
	line-height: 1;
	white-space: nowrap;
	cursor: pointer;

	border: var(--border-width) var.$button-border-color var(--border-style)
		string.unquote($important);
	color: var.$button-font-color string.unquote($important);
	background-color: var.$button-background-color string.unquote($important);
	font-weight: var(--font-weight--medium) string.unquote($important);
	border-radius: var.$button-border-radius string.unquote($important);
	padding: var.$button-padding-vertical var.$button-padding-horizontal string.unquote($important);
	font-size: var.$button-font-size string.unquote($important);

	-webkit-appearance: none;
	text-align: center;
	box-sizing: border-box;
	outline: none;
	margin: 0;
	transition:
		all 0.3s,
		padding 0s,
		width 0s,
		height 0s;

	gap: var(--spacing--3xs);

	@include utils.utils-user-select(none);

	// Solution for a inside button
	& a {
		color: var.$button-font-color string.unquote($important);
	}

	&:hover {
		color: var.$button-hover-font-color string.unquote($important);
		border-color: var.$button-hover-border-color string.unquote($important);
		background-color: var.$button-hover-background-color string.unquote($important);

		& a {
			color: var.$button-hover-font-color string.unquote($important);
		}
	}

	&:active,
	&.active {
		color: var.$button-active-font-color string.unquote($important);
		border-color: var.$button-active-border-color string.unquote($important);
		background-color: var.$button-active-background-color string.unquote($important);
		outline: none;

		& a {
			color: var.$button-active-font-color string.unquote($important);
		}
	}

	&:focus-visible:not(:active, .active) {
		color: var.$button-focus-font-color string.unquote($important);
		border-color: var.$button-focus-border-color string.unquote($important);
		background-color: var.$button-focus-background-color string.unquote($important);
		outline: var.$focus-outline-width solid var.$button-focus-outline-color
			string.unquote($important);

		& a {
			color: var.$button-focus-font-color string.unquote($important);
		}
	}

	&.disabled {
		&,
		&:hover,
		&:active,
		&:focus-visible {
			color: var.$button-disabled-font-color;
			border-color: var.$button-disabled-border-color;
			background-color: var.$button-disabled-background-color;

			& a {
				color: var.$button-disabled-font-color;
			}
		}
	}

	.loading {
		&,
		&:hover,
		&:active,
		&:focus-visible {
			color: var.$button-loading-font-color;
			border-color: var.$button-loading-border-color;
			background-color: var.$button-loading-background-color;

			& a {
				color: var.$button-loading-font-color;
			}
		}
	}

	&::-moz-focus-inner {
		border: 0;
	}

	> i {
		display: none;
	}

	> span {
		display: flex;
		justify-content: center;
		align-items: center;
	}
}

// =============================================================================
// Legacy Color Variant Mixins
// =============================================================================

@mixin n8n-button-secondary {
	--button--color--text: var(--button--color--text--secondary);
	--button--border-color: var(--button--border-color--secondary);
	--button--color--background: var(--button--color--background--secondary);

	--button--color--text--hover: var(--button--color--text--secondary--hover-active-focus);
	--button--border-color--hover: var(--button--border-color--secondary--hover-active-focus);
	--button--color--background--hover: var(--button--color--background--secondary--hover);

	--button--color--text--active: var(--button--color--text--secondary--hover-active-focus);
	--button--border-color--active: var(--button--border-color--secondary--hover-active-focus);
	--button--color--background--active: var(--button--color--background--secondary--active-focus);

	--button--color--text--focus: var(--button--color--text--secondary--hover-active-focus);
	--button--border-color--focus: var(--button--border-color--secondary--hover-active-focus);
	--button--color--background--focus: var(--button--color--background--secondary--active-focus);
	--button--outline-color--focus: var(--button--outline-color--secondary--focus);

	--button--color--text--disabled: var(--button--color--text--secondary--disabled);
	--button--border-color--disabled: var(--button--border-color--secondary--disabled);
	--button--color--background--disabled: var(--button--color--background--secondary);

	--button--color--text--loading: var(--button--color--text--secondary--loading);
	--button--border-color--loading: var(--button--border-color--secondary--loading);
	--button--color--background--loading: var(--button--color--background--secondary--loading);
}

@mixin n8n-button-highlight {
	--button--color--text: var(--button--color--text--highlight);
	--button--border-color: var(--button--border-color--highlight);
	--button--color--background: var(--button--color--background--highlight);

	--button--color--text--hover: var(--button--color--text--highlight--hover-active-focus);
	--button--border-color--hover: var(--button--border-color--highlight--hover-active-focus);
	--button--color--background--hover: var(--button--color--background--highlight--hover);

	--button--color--text--active: var(--button--color--text--highlight--hover-active-focus);
	--button--border-color--active: var(--button--border-color--highlight--hover-active-focus);
	--button--color--background--active: var(--button--color--background--highlight--active-focus);

	--button--color--text--focus: var(--button--color--text--highlight--hover-active-focus);
	--button--border-color--focus: var(--button--border-color--highlight--hover-active-focus);
	--button--color--background--focus: var(--button--color--background--highlight--active-focus);
	--button--outline-color--focus: var(--button--outline-color--highlight--focus);

	--button--color--text--disabled: var(--button--color--text--highlight--disabled);
	--button--border-color--disabled: var(--button--border-color--highlight--disabled);
	--button--color--background--disabled: var(--button--color--background--highlight--disabled);

	--button--color--text--loading: var(--button--color--text--highlight--loading);
	--button--border-color--loading: var(--button--border-color--highlight--loading);
	--button--color--background--loading: var(--button--color--background--highlight--loading);
}

@mixin n8n-button-highlight-fill {
	--button--color--text: var(--button--color--text--highlight-fill);
	--button--border-color: var(--button--border-color--highlight-fill);
	--button--color--background: var(--button--color--background--highlight-fill);

	--button--color--text--hover: var(--button--color--text--highlight-fill--hover-active-focus);
	--button--border-color--hover: var(--button--border-color--highlight-fill--hover-active-focus);
	--button--color--background--hover: var(--button--color--background--highlight-fill--hover);

	--button--color--text--active: var(--button--color--text--highlight-fill--hover-active-focus);
	--button--border-color--active: var(--button--border-color--highlight-fill--hover-active-focus);
	--button--color--background--active: var(
		--button--color--background--highlight-fill--active-focus
	);

	--button--color--text--focus: var(--button--color--text--highlight-fill--hover-active-focus);
	--button--border-color--focus: var(--button--border-color--highlight-fill--hover-active-focus);
	--button--color--background--focus: var(
		--button--color--background--highlight-fill--active-focus
	);
	--button--outline-color--focus: var(--button--outline-color--highlight-fill--focus);

	--button--color--text--disabled: var(--button--color--text--highlight-fill--disabled);
	--button--border-color--disabled: var(--button--border-color--highlight-fill--disabled);
	--button--color--background--disabled: var(--button--color--background--highlight-fill--disabled);

	--button--color--text--loading: var(--button--color--text--highlight-fill);
	--button--border-color--loading: var(--button--border-color--highlight-fill);
	--button--color--background--loading: var(--button--color--background--highlight-fill);
}

@mixin n8n-button-success {
	--button--color--text: var(--button--color--text--success);
	--button--border-color: var(--color--success);
	--button--color--background: var(--color--success);

	--button--color--text--hover: var(--button--color--text--success);
	--button--border-color--hover: var(--color--success--shade-1);
	--button--color--background--hover: var(--color--success--shade-1);

	--button--color--text--active: var(--button--color--text--success);
	--button--border-color--active: var(--color--success--shade-1);
	--button--color--background--active: var(--color--success--shade-1);

	--button--color--text--focus: var(--button--color--text--success);
	--button--border-color--focus: var(--color--success);
	--button--color--background--focus: var(--color--success);
	--button--outline-color--focus: var(--color--success--tint-1);

	--button--color--text--disabled: var(--button--color--text--success--disabled);
	--button--border-color--disabled: var(--color--success--tint-3);
	--button--color--background--disabled: var(--color--success--tint-3);

	--button--color--text--loading: var(--button--color--text--success);
	--button--border-color--loading: var(--color--success);
	--button--color--background--loading: var(--color--success);
}

@mixin n8n-button-warning {
	--button--color--text: var(--button--color--text--warning);
	--button--border-color: var(--color--warning);
	--button--color--background: var(--color--warning);

	--button--color--text--hover: var(--button--color--text--warning);
	--button--border-color--hover: var(--color--warning--shade-1);
	--button--color--background--hover: var(--color--warning--shade-1);

	--button--color--text--active: var(--button--color--text--warning);
	--button--border-color--active: var(--color--warning--shade-1);
	--button--color--background--active: var(--color--warning--shade-1);

	--button--color--text--focus: var(--button--color--text--warning);
	--button--border-color--focus: var(--color--warning);
	--button--color--background--focus: var(--color--warning);
	--button--outline-color--focus: var(--color--warning--tint-1);

	--button--color--text--disabled: var(--button--color--text--warning--disabled);
	--button--border-color--disabled: var(--color--warning--tint-1);
	--button--color--background--disabled: var(--color--warning--tint-1);

	--button--color--text--loading: var(--button--color--text--warning);
	--button--border-color--loading: var(--color--warning);
	--button--color--background--loading: var(--color--warning);
}

@mixin n8n-button-danger {
	--button--color--text: var(--button--color--text--danger);
	--button--border-color: var(--button--border-color--danger);
	--button--color--background: var(--color--danger);

	--button--color--text--hover: var(--button--color--text--danger);
	--button--border-color--hover: var(--color--danger--shade-1);
	--button--color--background--hover: var(--color--danger--shade-1);

	--button--color--text--active: var(--button--color--text--danger);
	--button--border-color--active: var(--color--danger--shade-1);
	--button--color--background--active: var(--color--danger--shade-1);

	--button--color--text--focus: var(--button--color--text--danger);
	--button--border-color--focus: var(--color--danger);
	--button--color--background--focus: var(--color--danger);
	--button--outline-color--focus: var(--button--outline-color--danger--focus);

	--button--color--text--disabled: var(--button--color--text--danger--disabled);
	--button--border-color--disabled: var(--button--border-color--danger--disabled);
	--button--color--background--disabled: var(--button--color--background--danger--disabled);

	--button--color--text--loading: var(--button--color--text--danger);
	--button--border-color--loading: var(--color--danger);
	--button--color--background--loading: var(--color--danger);
}

// =============================================================================
// Legacy Compat Module Styles Mixin
// This mixin generates all the legacy module classes when included
// =============================================================================

@mixin legacy-compat-styles {
	// Legacy compat base class
	&.legacyCompat {
		@include n8n-button;

		// Override grid display for legacy compat
		display: inline-block;

		// Legacy Compat Colors
		&.secondary {
			@include n8n-button-secondary;
		}

		&.highlight {
			@include n8n-button-highlight;
		}

		&.highlightFill {
			@include n8n-button-highlight-fill;
		}

		&.success {
			@include n8n-button-success;
		}

		&.warning {
			@include n8n-button-warning;
		}

		&.danger {
			@include n8n-button-danger;
		}

		// Legacy Compat Sizes (only xlarge - other sizes use new system)
		&.xlarge {
			--button--padding--vertical: var(--spacing--xs);
			--button--padding--horizontal: var(--spacing--sm);
			--button--font-size: var(--font-size--md);
			--button--height: 2.875rem; // 46px
		}

		// Legacy Compat Modifiers
		&.outline {
			--button--color--background: transparent;
			--button--color--background--disabled: transparent;

			&.primary {
				--button--color--text: var(--color--primary);
				--button--color--text--disabled: var(--color--primary--tint-1);
				--button--border-color--disabled: var(--color--primary--tint-1);
				--button--color--background--disabled: transparent;
			}

			&.success {
				--button--color--text: var(--color--success);
				--button--border-color: var(--color--success);
				--button--border-color--hover: var(--color--success);
				--button--color--background--hover: var(--color--success);
				--button--color--background--active: var(--color--success);
				--button--color--text--disabled: var(--color--success--tint-1);
				--button--border-color--disabled: var(--color--success--tint-1);
				--button--color--background--disabled: transparent;
			}

			&.warning {
				--button--color--text: var(--color--warning);
				--button--border-color: var(--color--warning);
				--button--border-color--hover: var(--color--warning);
				--button--color--background--hover: var(--color--warning);
				--button--color--background--active: var(--color--warning);
				--button--color--text--disabled: var(--color--warning--tint-1);
				--button--border-color--disabled: var(--color--warning--tint-1);
				--button--color--background--disabled: transparent;
			}

			&.danger {
				--button--color--text: var(--color--danger);
				--button--border-color: var(--color--danger);
				--button--border-color--hover: var(--color--danger);
				--button--color--background--hover: var(--color--danger);
				--button--color--background--active: var(--color--danger);
				--button--color--text--disabled: var(--color--danger--tint-3);
				--button--border-color--disabled: var(--color--danger--tint-3);
				--button--color--background--disabled: transparent;
			}
		}

		&.text {
			--button--color--text: var(--text-button--color--text--secondary);
			--button--border-color: transparent;
			--button--color--background: transparent;
			--button--border-color--hover: transparent;
			--button--color--background--hover: transparent;
			--button--border-color--active: transparent;
			--button--color--background--active: transparent;
			--button--border-color--focus: transparent;
			--button--color--background--focus: transparent;
			--button--border-color--disabled: transparent;
			--button--color--background--disabled: transparent;

			&:focus {
				outline: 0;
			}

			&.primary {
				--button--color--text: var(--color--primary);
				--button--color--text--hover: var(--color--primary--shade-1);
				--button--color--text--active: var(--color--primary--shade-1);
				--button--color--text--focus: var(--color--primary);
				--button--color--text--disabled: var(--color--primary--tint-1);
			}

			&.success {
				--button--color--text: var(--color--success);
				--button--color--text--hover: var(--color--success--shade-1);
				--button--color--text--active: var(--color--success--shade-1);
				--button--color--text--focus: var(--color--success);
				--button--color--text--disabled: var(--color--success--tint-1);
			}

			&.warning {
				--button--color--text: var(--color--warning);
				--button--color--text--hover: var(--color--warning--shade-1);
				--button--color--text--active: var(--color--warning--shade-1);
				--button--color--text--focus: var(--color--warning);
				--button--color--text--disabled: var(--color--warning--tint-1);
			}

			&.danger {
				--button--color--text: var(--color--danger);
				--button--color--text--hover: var(--color--danger--shade-1);
				--button--color--text--active: var(--color--danger--shade-1);
				--button--color--text--focus: var(--color--danger);
				--button--color--text--disabled: var(--color--danger--tint-3);
			}

			&:hover {
				text-decoration: underline;
			}
		}

		&.loading {
			position: relative;
			pointer-events: none;

			&:before {
				pointer-events: none;
				content: '';
				position: absolute;
				left: -1px;
				top: -1px;
				right: -1px;
				bottom: -1px;
				border-radius: inherit;
			}
		}

		&.disabled {
			&,
			&:hover,
			&:active,
			&:focus {
				cursor: not-allowed;
				background-image: none;
			}
		}

		&.transparent {
			--button--color--background: transparent;
			--button--color--background--active: transparent;
		}

		&.withIcon {
			display: inline-flex;
			justify-content: center;
			align-items: center;
		}

		&.square {
			display: inline-flex;
			justify-content: center;
			align-items: center;
		}
	}
}

// Legacy icon styles mixin
@mixin legacy-icon-styles {
	display: inline-flex;
	justify-content: center;
	align-items: center;

	svg {
		display: block;
	}
}

// Legacy global styles for Element Plus button compatibility
@mixin el-button-compat {
	@include n8n-button(true);

	--button--padding--vertical: var(--spacing--2xs);
	--button--padding--horizontal: var(--spacing--xs);
	--button--font-size: var(--font-size--2xs);

	+ .el-button {
		margin-left: var(--spacing--2xs);
	}

	&.btn--cancel,
	&.el-color-dropdown__link-btn {
		@include n8n-button-secondary;
	}
}

// =============================================================================
// Global Legacy Override Classes
// =============================================================================
// These global classes can be applied via the `class` attribute to override
// V2 button styling with legacy color schemes.
//
// @deprecated Do not use these classes in new code. They exist only for
// backwards compatibility during migration from V1 to V2 Button API.
// These will be removed in a future major version.
//
// Usage:
//   <N8nButton variant="solid" class="n8n-button--success">Save</N8nButton>
//   <N8nButton variant="ghost" class="n8n-button--highlight">Info</N8nButton>

/** @deprecated Use a semantic variant instead of success color */
:global(.n8n-button--success) {
	--button--color--background: var(--color--success);
	--button--color--background-hover: var(--color--success--shade-1);
	--button--color--background-active: var(--color--success--shade-1);
	--button--color: var(--color--neutral-white);
	--button--shadow: 0 0 0 1px var(--color--success);
	--button--shadow--hover: 0 0 0 1px var(--color--success--shade-1);
	--button--shadow--active: 0 0 0 1px var(--color--success--shade-1);

	&:disabled,
	&[aria-disabled='true'] {
		--button--color--background: var(--color--success--tint-3);
		--button--shadow: 0 0 0 1px var(--color--success--tint-3);
	}
}

/** @deprecated Use a semantic variant instead of warning color */
:global(.n8n-button--warning) {
	--button--color--background: var(--color--warning);
	--button--color--background-hover: var(--color--warning--shade-1);
	--button--color--background-active: var(--color--warning--shade-1);
	--button--color: var(--color--neutral-white);
	--button--shadow: 0 0 0 1px var(--color--warning);
	--button--shadow--hover: 0 0 0 1px var(--color--warning--shade-1);
	--button--shadow--active: 0 0 0 1px var(--color--warning--shade-1);

	&:disabled,
	&[aria-disabled='true'] {
		--button--color--background: var(--color--warning--tint-1);
		--button--shadow: 0 0 0 1px var(--color--warning--tint-1);
	}
}

/** @deprecated Use a semantic variant instead of highlight color */
:global(.n8n-button--highlight) {
	--button--color--background: var(--button--color--background--highlight);
	--button--color--background-hover: var(--button--color--background--highlight--hover);
	--button--color--background-active: var(--button--color--background--highlight--active-focus);
	--button--color: var(--button--color--text--highlight);
	--button--shadow: 0 0 0 1px var(--button--border-color--highlight);
	--button--shadow--hover: 0 0 0 1px var(--button--border-color--highlight--hover-active-focus);
	--button--shadow--active: 0 0 0 1px var(--button--border-color--highlight--hover-active-focus);

	&:disabled,
	&[aria-disabled='true'] {
		--button--color--background: var(--button--color--background--highlight--disabled);
		--button--color: var(--button--color--text--highlight--disabled);
		--button--shadow: 0 0 0 1px var(--button--border-color--highlight--disabled);
	}
}

/** @deprecated Use a semantic variant instead of highlightFill color */
:global(.n8n-button--highlightFill) {
	--button--color--background: var(--button--color--background--highlight-fill);
	--button--color--background-hover: var(--button--color--background--highlight-fill--hover);
	--button--color--background-active: var(
		--button--color--background--highlight-fill--active-focus
	);
	--button--color: var(--button--color--text--highlight-fill);
	--button--shadow: 0 0 0 1px var(--button--border-color--highlight-fill);
	--button--shadow--hover: 0 0 0 1px var(--button--border-color--highlight-fill--hover-active-focus);
	--button--shadow--active: 0 0 0 1px
		var(--button--border-color--highlight-fill--hover-active-focus);

	&:disabled,
	&[aria-disabled='true'] {
		--button--color--background: var(--button--color--background--highlight-fill--disabled);
		--button--color: var(--button--color--text--highlight-fill--disabled);
		--button--shadow: 0 0 0 1px var(--button--border-color--highlight-fill--disabled);
	}
}
