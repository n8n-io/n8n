# ============================================================================
# Fichier d'exemple de configuration n8n pour dÃ©ploiement Render + Supabase
# ============================================================================
#
# INSTRUCTIONS:
# 1. NE PAS renommer ce fichier en .env dans votre repo Git !
# 2. Configurez ces variables directement dans le Dashboard Render
# 3. Ce fichier sert uniquement de rÃ©fÃ©rence
#
# ============================================================================

# ============================================================================
# CONFIGURATION GÃ‰NÃ‰RALE N8N
# ============================================================================

# Environnement Node.js
NODE_ENV=production

# HÃ´te accessible publiquement (URL de votre app Render)
# Exemple: mon-n8n.onrender.com (sans https://)
N8N_HOST=votre-app-name.onrender.com

# Protocole (toujours HTTPS sur Render)
N8N_PROTOCOL=https

# Port (Render gÃ¨re le routage, gardez 5678)
N8N_PORT=5678

# Chemin de base (laisser / par dÃ©faut)
N8N_PATH=/

# URL des webhooks (gÃ©nÃ©ralement https://{N8N_HOST}/)
WEBHOOK_URL=https://votre-app-name.onrender.com/

# ============================================================================
# SÃ‰CURITÃ‰ - CLÃ‰ DE CHIFFREMENT (CRITIQUE!)
# ============================================================================
#
# âš ï¸  GÃ‰NÃ‰REZ UNE CLÃ‰ UNIQUE ET SÃ‰CURISÃ‰E:
#     openssl rand -hex 32
#
# âš ï¸  NE JAMAIS CHANGER CETTE CLÃ‰ APRÃˆS LE PREMIER DÃ‰PLOIEMENT!
#     Sinon vous perdrez toutes vos credentials chiffrÃ©es!
#
# âš ï¸  SAUVEGARDEZ CETTE CLÃ‰ EN SÃ‰CURITÃ‰ (gestionnaire de mots de passe)
#
N8N_ENCRYPTION_KEY=GENERER_UNE_CLE_ALEATOIRE_32_CARACTERES_MINIMUM

# ============================================================================
# BASE DE DONNÃ‰ES POSTGRESQL (SUPABASE)
# ============================================================================

# Type de base de donnÃ©es
DB_TYPE=postgresdb

# HÃ´te Supabase (trouvez-le dans Project Settings > Database)
# Exemple: db.xxxxxxxxxxxxx.supabase.co
DB_POSTGRESDB_HOST=db.votre-projet.supabase.co

# Port PostgreSQL (toujours 5432 pour Supabase)
DB_POSTGRESDB_PORT=5432

# Nom de la base de donnÃ©es (gÃ©nÃ©ralement "postgres" pour Supabase)
DB_POSTGRESDB_DATABASE=postgres

# Utilisateur PostgreSQL (gÃ©nÃ©ralement "postgres" pour Supabase)
DB_POSTGRESDB_USER=postgres

# Mot de passe PostgreSQL
# Trouvez-le dans Supabase > Project Settings > Database > Database Password
DB_POSTGRESDB_PASSWORD=VOTRE_MOT_DE_PASSE_SUPABASE

# SchÃ©ma de base de donnÃ©es
DB_POSTGRESDB_SCHEMA=public

# Taille du pool de connexions (5 recommandÃ© pour Render Starter)
DB_POSTGRESDB_POOL_SIZE=5

# Timeout de connexion (millisecondes)
DB_POSTGRESDB_CONNECTION_TIMEOUT=20000

# Timeout d'inactivitÃ© (millisecondes)
DB_POSTGRESDB_IDLE_CONNECTION_TIMEOUT=30000

# ============================================================================
# SSL POSTGRESQL (REQUIS POUR SUPABASE)
# ============================================================================

# Activer SSL (OBLIGATOIRE pour Supabase)
DB_POSTGRESDB_SSL_ENABLED=true

# DÃ©sactiver la vÃ©rification des certificats
# (Supabase utilise des certificats auto-signÃ©s)
DB_POSTGRESDB_SSL_REJECT_UNAUTHORIZED=false

# Certificats SSL personnalisÃ©s (gÃ©nÃ©ralement pas nÃ©cessaire pour Supabase)
# DB_POSTGRESDB_SSL_CA=
# DB_POSTGRESDB_SSL_CERT=
# DB_POSTGRESDB_SSL_KEY=

# ============================================================================
# TIMEZONE
# ============================================================================

# Timezone pour les workflows (utilisÃ©e par les nÅ“uds Schedule, etc.)
GENERIC_TIMEZONE=Europe/Paris

# Timezone systÃ¨me
TZ=Europe/Paris

# ============================================================================
# EXÃ‰CUTION DES WORKFLOWS
# ============================================================================

# Mode d'exÃ©cution (main = processus principal, recommandÃ© pour dÃ©marrer)
EXECUTIONS_PROCESS=main

# Nombre maximum d'exÃ©cutions Ã  conserver en DB (0 = illimitÃ©)
# EXECUTIONS_DATA_MAX_AGE=168  # 7 jours en heures
# EXECUTIONS_DATA_PRUNE=true

# ============================================================================
# AUTHENTIFICATION (OPTIONNEL)
# ============================================================================

# Activer l'authentification basique HTTP (dÃ©sactivÃ© par dÃ©faut)
# N8N_BASIC_AUTH_ACTIVE=false
# N8N_BASIC_AUTH_USER=
# N8N_BASIC_AUTH_PASSWORD=

# ============================================================================
# ENDPOINTS & WEBHOOKS
# ============================================================================

# Segments de chemin pour les endpoints
N8N_ENDPOINT_WEBHOOK=webhook
N8N_ENDPOINT_WEBHOOK_TEST=webhook-test
N8N_ENDPOINT_WEBHOOK_WAIT=webhook-waiting

# Taille maximale du payload (en MiB)
N8N_PAYLOAD_SIZE_MAX=16

# Taille max pour les fichiers form-data (en MiB)
N8N_FORMDATA_FILE_SIZE_MAX=200

# ============================================================================
# PERFORMANCE & SCALABILITÃ‰
# ============================================================================

# DÃ©sactiver l'application de permissions strictes sur les fichiers
# (nÃ©cessaire dans un environnement Docker)
N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=false

# Nombre de proxies inverses devant n8n (Render gÃ¨re cela)
N8N_PROXY_HOPS=0

# ============================================================================
# LOGS & DIAGNOSTICS
# ============================================================================

# Niveau de log
# N8N_LOG_LEVEL=info  # Options: error, warn, info, verbose, debug

# Activer les logs de requÃªtes SQL (pour dÃ©boguer)
# DB_LOGGING_ENABLED=false
# DB_LOGGING_OPTIONS=error
# DB_LOGGING_MAX_EXECUTION_TIME=1000  # ms

# ============================================================================
# FONCTIONNALITÃ‰S AVANCÃ‰ES (OPTIONNEL)
# ============================================================================

# DÃ©sactiver l'interface web n8n
# N8N_DISABLE_UI=false

# Locale par dÃ©faut
N8N_DEFAULT_LOCALE=fr

# DÃ©sactiver la page d'utilisation
# N8N_HIDE_USAGE_PAGE=false

# ============================================================================
# MÃ‰TRIQUES PROMETHEUS (OPTIONNEL)
# ============================================================================

# Activer les mÃ©triques Prometheus sur /metrics
# N8N_METRICS=false
# N8N_METRICS_PREFIX=n8n_
# N8N_METRICS_INCLUDE_DEFAULT_METRICS=true

# ============================================================================
# CREDENTIALS & SECRETS (OPTIONNEL)
# ============================================================================

# PrÃ©-remplir des credentials (format JSON)
# CREDENTIALS_OVERWRITE_DATA={}

# ============================================================================
# NOTES DE SÃ‰CURITÃ‰
# ============================================================================
#
# âš ï¸  VARIABLES SENSIBLES Ã€ NE JAMAIS COMMITTER:
#     - N8N_ENCRYPTION_KEY
#     - DB_POSTGRESDB_PASSWORD
#     - DB_POSTGRESDB_HOST
#     - N8N_BASIC_AUTH_PASSWORD
#     - Toute clÃ© API ou secret
#
# âœ…  BONNES PRATIQUES:
#     1. Configurez ces variables dans Render Dashboard > Environment
#     2. Utilisez des secrets GitHub pour CI/CD
#     3. Sauvegardez N8N_ENCRYPTION_KEY dans un gestionnaire de mots de passe
#     4. Activez l'authentification 2FA sur Supabase et Render
#     5. Faites des backups rÃ©guliers de votre base Supabase
#
# ðŸ“–  DOCUMENTATION:
#     - n8n: https://docs.n8n.io/hosting/configuration/environment-variables/
#     - Render: https://render.com/docs/environment-variables
#     - Supabase: https://supabase.com/docs/guides/database
#
# ============================================================================
