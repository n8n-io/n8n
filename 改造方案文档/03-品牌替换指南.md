# n8n 品牌替换指南

> **目标：** 将 n8n 品牌替换为 quanyuge
> **优先级：** P1（可在架构改造后执行）
> **工期：** 1-2 天
> **风险等级：** 低

---

## 📋 一、替换范围

### 1.1 需要替换的内容

| 类别 | 原品牌 | 新品牌 | 位置 |
|------|--------|--------|------|
| **产品名称** | n8n | quanyuge | 所有用户可见文本 |
| **显示名称** | n8n | 全域阁 | 中文界面显示 |
| **英文名称** | n8n | Quanyuge | 英文界面显示 |
| **品牌标识** | n8n logo | quanyuge logo | 图标、Logo、Favicon |
| **域名/URL** | n8n.io | quanyuge.com | 链接、文档引用 |

### 1.2 不需要替换的内容

⚠️ **保留技术性引用（避免破坏功能）：**

| 保留项 | 原因 | 示例 |
|--------|------|------|
| **Package 名称** | NPM 包命名规范 | `@n8n/db`, `@n8n/api-types` |
| **代码命名空间** | 避免破坏导入 | `import { N8nButton } from '@n8n/design-system'` |
| **Git 仓库名** | 避免历史记录混乱 | `n8n-quanyuge` (保持当前命名) |
| **Docker 镜像** | 构建系统依赖 | `n8nio/n8n` (上游镜像) |
| **技术文档** | 开发者参考 | `CLAUDE.md`, `README.md` 中的技术说明 |

---

## 🎨 二、前端品牌替换

### 2.1 界面文本替换

#### 中文翻译文件

**文件路径：** `packages/frontend/@n8n/i18n/src/locales/zh.json`

**替换策略：** 将所有面向用户的 "n8n" 替换为 "全域阁"

```json
// 修改前
{
  "generic.welcome": "欢迎使用 n8n",
  "mainSidebar.title": "n8n 工作流编辑器",
  "auth.signup.title": "创建你的 n8n 账户"
}

// 修改后
{
  "generic.welcome": "欢迎使用全域阁",
  "mainSidebar.title": "全域阁工作流编辑器",
  "auth.signup.title": "创建你的全域阁账户"
}
```

**批量替换命令：**
```bash
cd packages/frontend/@n8n/i18n/src/locales
sed -i 's/n8n/全域阁/g' zh.json
```

#### 英文翻译文件

**文件路径：** `packages/frontend/@n8n/i18n/src/locales/en.json`

**替换策略：** 将所有面向用户的 "n8n" 替换为 "Quanyuge"

```json
// 修改前
{
  "generic.welcome": "Welcome to n8n",
  "mainSidebar.title": "n8n workflow editor"
}

// 修改后
{
  "generic.welcome": "Welcome to Quanyuge",
  "mainSidebar.title": "Quanyuge workflow editor"
}
```

**批量替换命令：**
```bash
cd packages/frontend/@n8n/i18n/src/locales
sed -i 's/\bn8n\b/Quanyuge/g' en.json
```

### 2.2 页面标题和元数据

#### HTML 标题

**文件路径：** `packages/frontend/editor-ui/index.html`

```html
<!-- 修改前 -->
<title>n8n - Workflow Automation</title>
<meta name="description" content="n8n is a workflow automation tool">

<!-- 修改后 -->
<title>全域阁 - 工作流自动化平台</title>
<meta name="description" content="全域阁是一个强大的工作流自动化平台">
```

#### 环境变量

**文件路径：** `packages/cli/src/config/`

```typescript
// 修改前
export const INSTANCE_NAME = 'n8n';
export const BRAND_NAME = 'n8n';

// 修改后
export const INSTANCE_NAME = 'quanyuge';
export const BRAND_NAME = '全域阁';
```

### 2.3 Logo 和图标替换

#### Favicon

**替换文件列表：**
```
packages/frontend/editor-ui/public/
├── favicon.ico          # 32x32 网站图标
├── favicon-16x16.png    # 16x16 PNG
├── favicon-32x32.png    # 32x32 PNG
├── apple-touch-icon.png # 180x180 iOS 图标
└── android-chrome-*.png # Android 图标
```

**设计建议：**
- 主色调：保持或调整为品牌色
- 简洁设计：小图标需要清晰可辨
- 格式支持：PNG（带透明）+ ICO

#### Logo 图片

**文件路径：** `packages/frontend/@n8n/design-system/src/assets/`

```
assets/
├── n8n-logo.svg         → quanyuge-logo.svg
├── n8n-logo-expanded.svg → quanyuge-logo-expanded.svg
└── n8n-icon.svg         → quanyuge-icon.svg
```

**组件引用更新：**

```vue
<!-- 修改前 -->
<img src="@/assets/n8n-logo.svg" alt="n8n logo">

<!-- 修改后 -->
<img src="@/assets/quanyuge-logo.svg" alt="全域阁 logo">
```

#### CSS 品牌色

**文件路径：** `packages/frontend/@n8n/design-system/src/css/variables.scss`

```scss
// 修改前（n8n 品牌色）
--color--primary: #ff6d5a;
--color--primary--shade-1: #e65a4a;

// 修改后（quanyuge 品牌色，示例）
--color--primary: #1890ff;  // 根据你的品牌色调整
--color--primary--shade-1: #0e7fdf;
```

---

## 🔧 三、后端品牌替换

### 3.1 API 响应和消息

#### 错误消息

**文件路径：** `packages/cli/src/errors/`

```typescript
// 修改前
throw new Error('n8n encountered an error');

// 修改后
throw new Error('全域阁遇到了一个错误');
```

#### 邮件模板

**文件路径：** `packages/cli/src/emails/templates/`

```html
<!-- 修改前 -->
<h1>Welcome to n8n</h1>
<p>Thank you for signing up with n8n...</p>

<!-- 修改后 -->
<h1>欢迎使用全域阁</h1>
<p>感谢您注册全域阁...</p>
```

### 3.2 系统配置

#### 默认设置

**文件路径：** `packages/cli/src/config/schema.ts`

```typescript
// 修改前
const defaults = {
  instanceName: 'n8n',
  productName: 'n8n',
};

// 修改后
const defaults = {
  instanceName: 'quanyuge',
  productName: '全域阁',
};
```

#### 环境变量文档

**文件路径：** `.env.example`

```bash
# 修改前
N8N_INSTANCE_NAME=n8n

# 修改后
N8N_INSTANCE_NAME=quanyuge
```

---

## 📄 四、文档品牌替换

### 4.1 用户文档

**需要更新的文档：**

```
docs/
├── README.md              # 项目说明
├── CHANGELOG.md           # 更新日志
├── FEATURES.md            # 功能说明
└── 改造方案文档/
    ├── README.md          # 方案索引
    └── *.md               # 各类方案文档
```

**替换示例：**

```markdown
<!-- 修改前 -->
# n8n 二次开发版

这是基于 n8n 的定制版本...

<!-- 修改后 -->
# 全域阁工作流自动化平台

全域阁是基于 n8n 技术栈开发的企业级工作流自动化平台...
```

### 4.2 代码注释

**选择性替换：** 仅替换面向用户的注释

```typescript
// 修改前
/**
 * n8n workflow editor component
 * Provides the main workflow editing interface
 */

// 修改后
/**
 * 全域阁工作流编辑器组件
 * 提供主要的工作流编辑界面
 */
```

⚠️ **保留技术性注释：**
```typescript
// 保持不变（技术参考）
/**
 * Extended from n8n's base workflow class
 * Compatible with n8n workflow format
 */
```

---

## 🔍 五、实施步骤

### 阶段 1：前端界面替换（4-6 小时）

1. **翻译文件批量替换**
   ```bash
   # 中文翻译
   cd packages/frontend/@n8n/i18n/src/locales
   sed -i 's/n8n/全域阁/g' zh.json

   # 英文翻译
   sed -i 's/\bn8n\b/Quanyuge/g' en.json
   ```

2. **HTML 元数据更新**
   - 修改 `index.html` 的 `<title>` 和 `<meta>`
   - 更新 Favicon 和图标

3. **Logo 和图标替换**
   - 准备品牌 Logo（SVG 格式）
   - 准备 Favicon（多尺寸 PNG + ICO）
   - 替换 `@n8n/design-system/src/assets/` 中的图标
   - 更新组件引用

4. **验证**
   ```bash
   cd packages/frontend/editor-ui
   pnpm dev
   ```
   - 检查页面标题
   - 检查 Logo 显示
   - 检查翻译文本

### 阶段 2：后端消息替换（2-3 小时）

1. **搜索需要替换的文本**
   ```bash
   cd packages/cli
   grep -r "n8n" src/ --include="*.ts" | grep -v "@n8n" | grep -v "n8n-"
   ```

2. **选择性替换**
   - 错误消息
   - 邮件模板
   - 系统配置

3. **验证**
   ```bash
   pnpm typecheck
   pnpm build
   ```

### 阶段 3：文档更新（1-2 小时）

1. **更新项目文档**
   ```bash
   # 批量搜索
   find docs/ -name "*.md" -exec grep -l "n8n" {} \;

   # 手动审查并替换
   ```

2. **更新改造方案文档**
   - 保留技术性的 "n8n" 引用
   - 替换品牌相关的说明

3. **更新 README**
   - 项目名称
   - 项目描述
   - 功能介绍

### 阶段 4：测试验证（2-3 小时）

1. **视觉检查**
   - [ ] 登录页面品牌显示
   - [ ] 主界面 Logo 和标题
   - [ ] Favicon 显示
   - [ ] 侧边栏品牌名称

2. **功能检查**
   - [ ] 邮件通知品牌名称
   - [ ] 错误消息品牌名称
   - [ ] 系统设置中的品牌信息

3. **构建检查**
   ```bash
   pnpm typecheck  # 类型检查通过
   pnpm build      # 构建成功
   pnpm lint       # 代码检查通过
   ```

---

## ⚠️ 六、注意事项

### 6.1 不要替换的场景

❌ **避免替换：**

1. **Package 名称和命名空间**
   ```typescript
   // 保持不变
   import { N8nButton } from '@n8n/design-system';
   import type { INodeType } from 'n8n-workflow';
   ```

2. **技术文档中的上游引用**
   ```markdown
   // 保持不变
   本项目基于 n8n 开源项目开发
   遵循 n8n 的架构设计
   ```

3. **Git 历史和提交消息**
   - 不修改已有的 commit 消息
   - 不修改分支名称（除非必要）

4. **外部依赖**
   ```json
   // package.json - 保持不变
   {
     "dependencies": {
       "n8n-workflow": "^1.0.0",
       "n8n-core": "^1.0.0"
     }
   }
   ```

### 6.2 品牌一致性

✅ **确保统一：**

| 场景 | 中文 | 英文 | 拼音/代码 |
|------|------|------|----------|
| 产品名称 | 全域阁 | Quanyuge | quanyuge |
| Logo 文字 | 全域阁 | Quanyuge | - |
| URL/域名 | - | - | quanyuge.com |
| 代码标识 | - | - | quanyuge |

### 6.3 法律和版权

⚠️ **保留声明：**

```markdown
# 全域阁工作流自动化平台

基于 n8n 开源项目（Apache 2.0 License）开发
原始项目：https://github.com/n8n-io/n8n

本项目对 n8n 进行了定制化开发，包括：
- 移除云服务依赖
- 解锁企业功能
- 品牌定制化
- 多租户架构改造

仅供内部使用，不对外发布。
```

---

## 📊 七、执行清单

### 前端替换清单

- [ ] 中文翻译文件 (zh.json)
- [ ] 英文翻译文件 (en.json)
- [ ] HTML 标题和元数据
- [ ] Logo SVG 文件（3 个）
- [ ] Favicon（5 个尺寸）
- [ ] 品牌色 CSS 变量
- [ ] 组件中的 Logo 引用
- [ ] 页面标题组件

### 后端替换清单

- [ ] 错误消息模板
- [ ] 邮件模板（欢迎邮件、重置密码等）
- [ ] 系统配置默认值
- [ ] 环境变量示例 (.env.example)
- [ ] API 响应消息

### 文档替换清单

- [ ] README.md
- [ ] CHANGELOG.md
- [ ] FEATURES.md
- [ ] docs/ 目录下的所有 .md 文件
- [ ] 改造方案文档（选择性）

### 验证清单

- [ ] 前端开发模式运行正常
- [ ] 所有页面 Logo 正确显示
- [ ] 翻译文本正确显示
- [ ] TypeScript 编译通过
- [ ] 构建成功（0 错误）
- [ ] 代码检查通过

---

## 🎯 八、总结

### 预期工作量

| 阶段 | 工作量 | 风险 |
|------|--------|------|
| 前端界面替换 | 4-6 小时 | 低 |
| 后端消息替换 | 2-3 小时 | 低 |
| 文档更新 | 1-2 小时 | 极低 |
| 测试验证 | 2-3 小时 | 低 |
| **总计** | **1-2 天** | **低** |

### 执行建议

1. **创建专门分支**
   ```bash
   git checkout -b brand/quanyuge-replacement
   ```

2. **分阶段执行**
   - 先完成前端可视化部分
   - 再处理后端消息
   - 最后更新文档

3. **充分测试**
   - 每完成一个阶段立即测试
   - 确保构建和类型检查通过

4. **保留技术性引用**
   - 代码中的 `@n8n/*` 包名保持不变
   - 技术文档中保留上游引用

### 最佳实践

✅ **推荐：**
- 使用全局搜索替换工具（VSCode、sed）
- 批量替换前先备份
- 逐个文件审查替换结果
- 保持品牌名称的一致性

❌ **避免：**
- 盲目的全局替换（会破坏技术性引用）
- 修改 package 名称（会破坏构建）
- 删除上游项目的版权声明

---

**文档版本：** v1.0
**最后更新：** 2025-11-04
**执行优先级：** P1（可在架构改造后执行）
