# n8n 节点完整分类和配置策略

> **统计数据**
> - 普通节点（nodes-base）：308 个
> - AI 节点（nodes-langchain）：约 90 个
> - 凭证类型：388 种
> - **总计：约 400+ 个节点**

---

## 一、AI 大模型节点（平台统一配置 ✅）

### 1.1 LLM（大语言模型）节点

**配置策略：平台统一配置 API Key，用户直接使用**

| 节点名称 | 提供商 | 凭证类型 | 优先级 | 备注 |
|---------|--------|---------|--------|------|
| OpenAI / LMChatOpenAi | OpenAI | OpenAiApi | P0 | 最常用，必须配置 |
| Anthropic | Anthropic | AnthropicApi | P0 | Claude，必须配置 |
| Google Gemini | Google | GooglePalmApi | P1 | 免费额度大 |
| Azure OpenAI | Microsoft | AzureOpenAiApi | P2 | 企业客户 |
| Groq | Groq | GroqApi | P2 | 超快速推理 |
| DeepSeek | DeepSeek | DeepSeekApi | P2 | 国内，中文友好 |
| Mistral | Mistral | MistralCloudApi | P3 | 欧洲 AI |
| Cohere | Cohere | CohereApi | P3 | 企业级 |
| xAI Grok | xAI | XAiApi | P3 | Elon Musk 的 AI |
| OpenRouter | OpenRouter | OpenRouterApi | P3 | AI 模型聚合器 |

**不建议平台配置的 LLM：**
- **Ollama**（本地部署，用户自己运行）
- **HuggingFace Inference**（开源模型，用户自己选择）
- **Lemonade**（较小众）

### 1.2 Embeddings（向量嵌入）节点

**配置策略：平台统一配置（与 LLM 共用 API Key）**

| 节点名称 | 提供商 | 凭证类型 | 优先级 |
|---------|--------|---------|--------|
| OpenAI Embeddings | OpenAI | OpenAiApi | P0 |
| Cohere Embeddings | Cohere | CohereApi | P1 |
| Google Gemini Embeddings | Google | GooglePalmApi | P1 |
| Azure OpenAI Embeddings | Microsoft | AzureOpenAiApi | P2 |
| Mistral Embeddings | Mistral | MistralCloudApi | P3 |

**不建议平台配置：**
- Ollama Embeddings（本地）
- HuggingFace Embeddings（开源）

---

## 二、AI 基础设施节点（用户自己配置 ❌）

### 2.1 Vector Store（向量数据库）

**配置策略：用户自己的数据库，需要用户配置**

| 节点名称 | 服务 | 凭证类型 | 原因 |
|---------|------|---------|------|
| Pinecone | Pinecone | PineconeApi | 商业服务，用户自己账号 |
| Supabase Vector Store | Supabase | SupabaseApi | 用户自己的数据库 |
| PGVector | PostgreSQL | PostgresApi | 用户自己的数据库 |
| Qdrant | Qdrant | QdrantApi | 用户自己部署或云端 |
| Weaviate | Weaviate | WeaviateApi | 用户自己部署 |
| Redis Vector Store | Redis | RedisApi | 用户自己的 Redis |
| MongoDB Atlas | MongoDB | MongoDbApi | 用户自己的数据库 |
| Milvus | Milvus | MilvusApi | 用户自己部署 |
| In-Memory | - | 无 | 内存，无需配置 |

### 2.2 Memory（对话记忆）

**配置策略：用户自己的存储，需要用户配置**

| 节点名称 | 服务 | 凭证类型 |
|---------|------|---------|
| MongoDB Chat Memory | MongoDB | MongoDbApi |
| Redis Chat Memory | Redis | RedisApi |
| Postgres Chat Memory | PostgreSQL | PostgresApi |
| Xata Memory | Xata | XataApi |
| Zep Memory | Zep | ZepApi |
| Motorhead Memory | Motorhead | MotorheadApi |
| Buffer Window Memory | - | 无（内存） |

### 2.3 Rerankers（重排序）

**配置策略：需要 API Key，建议用户配置**

| 节点名称 | 服务 | 凭证类型 |
|---------|------|---------|
| Cohere Reranker | Cohere | CohereApi |

---

## 三、AI 辅助工具节点（部分需要平台配置）

### 3.1 AI Tools（Agent 可用的工具）

| 节点名称 | 类型 | 配置策略 | 原因 |
|---------|------|---------|------|
| SerpApi | 搜索 API | 平台配置 ✅ | 通用搜索服务 |
| WolframAlpha | 计算引擎 | 平台配置 ✅ | 科学计算 |
| Wikipedia | 百科 | 无需配置 | 公开 API |
| SearXng | 搜索引擎 | 用户配置 ❌ | 需要自己部署 |
| Calculator | 计算器 | 无需配置 | 纯功能 |
| Code Tool | 代码执行 | 无需配置 | 沙箱执行 |
| HTTP Request Tool | HTTP 请求 | 无需配置 | 用户输入 URL |
| Workflow Tool | 调用工作流 | 无需配置 | 内部工具 |
| Vector Store Tool | 知识库检索 | 依赖 Vector Store | - |

---

## 四、功能性 AI 节点（无需配置 ⭕）

### 4.1 Chains（预设链）

**配置策略：无需配置，直接使用 LLM**

- Summarization Chain（文本摘要）
- Sentiment Analysis（情感分析）
- Text Classifier（文本分类）
- Information Extractor（信息提取）

### 4.2 Text Splitters（文本分割）

**配置策略：无需配置**

- Recursive Character Text Splitter
- Token Splitter
- Character Text Splitter

### 4.3 Output Parsers（输出解析）

**配置策略：无需配置**

- Structured Output Parser
- Item List Parser
- Autofixing Parser

### 4.4 Document Loaders（文档加载）

**配置策略：无需配置**

- Binary Input Loader
- JSON Input Loader
- Default Data Loader
- GitHub Loader（需要 GitHub Token，用户配置）

### 4.5 其他

- Model Selector（模型选择器）
- Tool Executor（工具执行器）
- Retrievers（检索器）

---

## 五、第三方服务节点（用户自己配置 ❌）

### 5.1 通信协作

| 节点 | 服务 | 凭证类型 | 数据类型 |
|-----|------|---------|---------|
| Slack | Slack | SlackOAuth2Api | 用户私密数据 |
| Discord | Discord | DiscordOAuth2Api | 用户私密数据 |
| Telegram | Telegram | TelegramApi | 用户私密数据 |
| WhatsApp | WhatsApp | WhatsAppApi | 用户私密数据 |
| Microsoft Teams | Microsoft | MicrosoftTeamsOAuth2Api | 企业数据 |
| Gmail | Google | GmailOAuth2 | 用户私密数据 |
| Outlook | Microsoft | MicrosoftOutlookOAuth2Api | 用户私密数据 |

### 5.2 生产力工具

| 节点 | 服务 | 凭证类型 | 数据类型 |
|-----|------|---------|---------|
| Notion | Notion | NotionOAuth2Api | 用户私密数据 |
| Google Sheets | Google | GoogleSheetsOAuth2Api | 用户私密数据 |
| Google Drive | Google | GoogleDriveOAuth2Api | 用户私密数据 |
| Airtable | Airtable | AirtableApi | 用户私密数据 |
| Asana | Asana | AsanaOAuth2Api | 项目数据 |
| Trello | Trello | TrelloApi | 项目数据 |
| Monday.com | Monday | MondayOAuth2Api | 项目数据 |

### 5.3 开发工具

| 节点 | 服务 | 凭证类型 | 数据类型 |
|-----|------|---------|---------|
| GitHub | GitHub | GithubOAuth2Api | 代码仓库 |
| GitLab | GitLab | GitlabOAuth2Api | 代码仓库 |
| Bitbucket | Bitbucket | BitbucketOAuth2Api | 代码仓库 |
| Jira | Jira | JiraApi | 项目数据 |

### 5.4 营销 CRM

| 节点 | 服务 | 凭证类型 |
|-----|------|---------|
| Salesforce | Salesforce | SalesforceOAuth2Api |
| HubSpot | HubSpot | HubspotOAuth2Api |
| Mailchimp | Mailchimp | MailchimpOAuth2Api |
| Shopify | Shopify | ShopifyOAuth2Api |

### 5.5 云服务

| 节点 | 服务 | 凭证类型 |
|-----|------|---------|
| AWS S3 | AWS | AwsApi |
| AWS Lambda | AWS | AwsApi |
| Google Cloud Storage | Google | GoogleCloudApi |
| Azure Blob Storage | Azure | AzureStorageApi |

### 5.6 数据库

| 节点 | 服务 | 凭证类型 |
|-----|------|---------|
| MySQL | MySQL | MySqlApi |
| PostgreSQL | PostgreSQL | PostgresApi |
| MongoDB | MongoDB | MongoDbApi |
| Redis | Redis | RedisApi |
| Supabase | Supabase | SupabaseApi |

**总计：约 300+ 第三方服务节点**

---

## 六、纯功能节点（无需配置 ⭕）

### 6.1 数据处理

- Code（代码执行）
- Set（设置值）
- Merge（合并数据）
- Split Out（拆分数据）
- Aggregate（聚合数据）
- Sort（排序）
- Filter（过滤）
- Limit（限制数量）
- Remove Duplicates（去重）
- Compare Datasets（比较数据集）

### 6.2 流程控制

- IF（条件判断）
- Switch（多分支）
- Merge（合并分支）
- Loop Over Items（循环）
- Wait（等待）
- Execute Workflow（执行工作流）
- Stop and Error（停止和错误）

### 6.3 工具

- HTTP Request（HTTP 请求）- 用户输入 URL
- Webhook（Webhook）
- Schedule Trigger（定时触发）
- Manual Trigger（手动触发）
- Email Send（发送邮件）- 需要 SMTP 配置
- FTP（FTP 传输）- 需要用户配置
- SSH（SSH 连接）- 需要用户配置

### 6.4 转换

- DateTime（日期时间）
- Crypto（加密）
- Compression（压缩）
- HTML Extract（HTML 提取）
- XML（XML 处理）
- Markdown（Markdown 处理）
- RSS Read（RSS 阅读）

---

## 七、配置策略总结

### ✅ 平台统一配置（用户直接使用）

| 类别 | 节点数 | 优先级 | 预计成本/月 |
|------|--------|--------|-----------|
| **AI 大模型** | 10-15 个 | P0 | $500-2000 |
| **Embeddings** | 5-8 个 | P1 | 包含在 LLM 中 |
| **AI 工具** | 2-3 个 | P2 | $50-100 |
| **官方插件（未来）** | 待开发 | P3 | 按需 |

**配置清单（MVP）：**
1. OpenAI API Key（必须）
2. Anthropic API Key（必须）
3. Google Gemini API Key（推荐）
4. SerpApi Key（推荐，用于 AI Agent 搜索）
5. WolframAlpha API Key（可选，科学计算）

### ❌ 用户自己配置

| 类别 | 节点数 | 配置方式 | 原因 |
|------|--------|---------|------|
| **第三方服务** | 300+ | OAuth 或 API Key | 涉及用户私密数据 |
| **数据库** | 10+ | 连接信息 | 用户自己的数据库 |
| **Vector Store** | 8+ | API Key | 用户自己的服务 |
| **Memory** | 6+ | 连接信息 | 用户自己的存储 |

**配置方式：**
- **方式 1：OAuth 授权**（推荐）
  - 用户点击"授权"按钮
  - 跳转到第三方服务
  - 授权成功后自动返回

- **方式 2：节点参数输入**
  - 在节点参数中添加 API Key 字段
  - 用户手动输入

- **方式 3：保留凭证系统**（向后兼容）
  - 高级用户可以创建凭证
  - 在多个节点间复用

### ⭕ 无需配置

| 类别 | 节点数 |
|------|--------|
| **功能节点** | 50+ |
| **AI Chains** | 4 |
| **Text Splitters** | 3 |
| **Output Parsers** | 3 |

---

## 八、实施建议

### Phase 1：核心 AI 节点（1-2 周）

**目标：让用户可以直接使用 AI 大模型**

1. 配置服务：
   - OpenAI
   - Anthropic
   - Google Gemini

2. 数据库表：
   - `platform_services`
   - `managed_nodes`

3. 后端实现：
   - 节点配置注入
   - 配额控制

4. 前端实现：
   - 管理员配置页面

### Phase 2：第三方服务优化（2-3 周）

**目标：简化第三方服务配置**

1. 选项 A：OAuth 集成
   - 集成 OAuth 授权流程
   - 支持 Notion、Google、GitHub 等

2. 选项 B：参数化配置
   - 移除凭证概念
   - 改为节点参数直接输入

3. 选项 C：保留凭证系统
   - 向后兼容
   - 高级功能

### Phase 3：官方插件开发（按需）

**目标：开发平台自己的插件服务**

示例：
- 天气查询
- OCR 识别
- 数据分析
- 文档处理

---

## 九、成本估算

### 平台承担成本（按配额）

| 服务 | 价格 | 建议配额 | 月成本估算 |
|------|------|---------|-----------|
| OpenAI GPT-4 | $0.03/1K tokens | 每工作空间 100 万 tokens | $30/工作空间 |
| Claude | $0.015/1K tokens | 每工作空间 100 万 tokens | $15/工作空间 |
| Google Gemini | 免费 15 RPM | 无限制 | $0 |
| SerpApi | $50/5000 searches | 每工作空间 1000 次 | $10/工作空间 |

**单工作空间月成本：$55-60**

### 用户自己承担成本

所有第三方服务（Notion、Slack、数据库等）的成本由用户自己承担，平台无需支付。

---

## 十、关键决策点

### 问题 1：是否彻底移除凭证系统？

**选项 A：彻底移除**
- ✅ 用户体验最简单
- ❌ 向后不兼容
- ❌ 重构工作量大

**选项 B：保留作为高级功能**（推荐）
- ✅ 向后兼容
- ✅ 高级用户可用
- ✅ 渐进式改造

**选项 C：完全保留**
- ✅ 无需改造
- ❌ 不符合简化目标

### 问题 2：第三方服务配置方式？

**选项 A：OAuth 授权**（推荐）
- ✅ 用户体验最好
- ✅ 安全性高
- ❌ 开发工作量大

**选项 B：节点参数输入**
- ✅ 实现简单
- ❌ 用户需要找 API Key

**选项 C：混合模式**（最佳）
- OAuth 授权（支持的服务）
- 参数输入（不支持 OAuth 的）

### 问题 3：官方插件定义？

**明确：官方插件 = 你们平台自己开发的服务**

例如：
- 平台提供的天气 API
- 平台提供的 OCR 服务
- 平台提供的数据分析服务

**不是**：Notion、Slack 等第三方服务

---

## 十一、最终推荐方案

```
┌─────────────────────────────────────────────┐
│ 1️⃣ AI 大模型（10-15 个节点）                  │
│   OpenAI, Claude, Gemini, etc.             │
│   → 平台统一配置 API Key                     │
│   → 配额控制（每工作空间限额）                 │
│   → 用户直接使用，开箱即用                    │
└─────────────────────────────────────────────┘

┌─────────────────────────────────────────────┐
│ 2️⃣ 平台官方插件（未来开发）                    │
│   天气查询、OCR、数据分析等                   │
│   → 平台统一配置                             │
│   → 配额控制                                │
│   → 用户直接使用                             │
└─────────────────────────────────────────────┘

┌─────────────────────────────────────────────┐
│ 3️⃣ 第三方服务节点（300+ 个）                  │
│   Notion, Slack, Google Sheets, etc.       │
│   → 用户 OAuth 授权（优先）                  │
│   → 或节点参数输入 API Key                   │
│   → 数据隐私，用户自己的账号                  │
└─────────────────────────────────────────────┘

┌─────────────────────────────────────────────┐
│ 4️⃣ 功能节点（50+ 个）                         │
│   Code, HTTP Request, Data Transform        │
│   → 无需配置                                │
│   → 直接使用                                │
└─────────────────────────────────────────────┘
```

---

**文档版本：** v1.0
**最后更新：** 2025-11-07
**下一步：** 集成到多租户改造方案
