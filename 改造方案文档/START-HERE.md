# 🚀 从这里开始

> **5 分钟快速上手指南**

---

## 你是什么角色？点击对应链接

| 角色 | 你需要做什么 | 从哪里开始 |
|------|------------|-----------|
| 🎯 **产品经理** | 了解改造目标和功能 | [README.md](./README.md#改造目标) |
| 🏗️ **架构师/技术负责人** | 评估技术方案 | [README.md](./README.md#技术架构概览) + [01-架构底层改造方案.md](./01-架构底层改造方案.md) |
| 💻 **后端工程师** | 看改造清单，开始写代码 | [README.md](./README.md#后端改造清单) |
| 🎨 **前端工程师** | 看改造清单，开始写代码 | [README.md](./README.md#前端改造清单) |
| 🧪 **测试工程师** | 准备测试用例 | [README.md](./README.md#测试验收清单) |

---

## 📚 核心文档（按优先级）

### 必读（⭐⭐⭐⭐⭐）

1. **[README.md](./README.md)**
   - 📖 **内容：** 开发者指南、改造清单、时间线
   - 👥 **适合：** 所有角色
   - ⏱️ **阅读时间：** 10 分钟

2. **[01-架构底层改造方案.md](./01-架构底层改造方案.md)**
   - 📖 **内容：** 完整技术方案（数据库、后端、前端、计费、后台管理）
   - 👥 **适合：** 架构师、后端工程师、前端工程师
   - ⏱️ **阅读时间：** 30 分钟（精读）

3. **[02-架构图和流程图.md](./02-架构图和流程图.md)**
   - 📖 **内容：** Mermaid 架构图、E-R 图、流程图
   - 👥 **适合：** 所有技术角色
   - ⏱️ **阅读时间：** 15 分钟

### 重要（⭐⭐⭐⭐）

4. **[03-前后端分离架构说明.md](./03-前后端分离架构说明.md)**
   - 📖 **内容：** 前后端分离适配、WebSocket、CORS、部署
   - 👥 **适合：** 后端工程师、前端工程师、运维工程师
   - ⏱️ **阅读时间：** 20 分钟

### 可选（⭐⭐）

5. **[03-品牌替换指南.md](./03-品牌替换指南.md)**
   - 📖 **内容：** n8n → 全域阁品牌替换
   - 👥 **适合：** 前端工程师
   - ⏱️ **阅读时间：** 5 分钟
   - ⚠️ **注意：** 可在架构改造后执行，非必需

---

## 🎯 改造核心要点

### 我们要做什么？

将 n8n 改造为 **Coze 风格的多租户 SaaS 平台**：

```
✅ 工作空间隔离（个人 + 团队）
✅ 团队协作（邀请成员、角色管理）
✅ 平台计费（工作空间余额 + AI 调用 + RAG 服务）
✅ 后台管理（管理员可管理服务、充值、查看统计）
```

### 改造有多激进？

**非常激进！** 直接删除核心表和 242 处代码引用：

```sql
-- ❌ 删除 SharedWorkflow（147 处引用）
DROP TABLE shared_workflow;

-- ❌ 删除 SharedCredentials（95 处引用）
DROP TABLE shared_credentials;

-- ✅ Workflow 直接关联 Project
ALTER TABLE workflow ADD COLUMN project_id UUID;
```

**为什么可以这么激进？**
- 项目未上线生产环境
- 无需向后兼容
- 性能提升 30-40%

### 工期多久？

**15-16 周（约 4 个月）**

```
Week 1-3:   数据库 + 后端 (Repository + Service + Controller)
Week 4-5:   前端 (状态管理 + 组件 + 页面)
Week 6-9:   计费系统
Week 10-12: 平台服务（AI 模型 + RAG）
Week 13-14: 后台管理
Week 15-16: 测试上线
```

---

## ⚡ 快速导航

### 我想了解...

- **数据库如何改造？** → [01 文档第 3 节](./01-架构底层改造方案.md)
- **后端如何改造？** → [01 文档第 4 节](./01-架构底层改造方案.md)
- **前端如何改造？** → [01 文档第 5 节](./01-架构底层改造方案.md)
- **计费系统如何实现？** → [01 文档第 5.5 节](./01-架构底层改造方案.md)
- **后台管理如何实现？** → [01 文档第 6 节](./01-架构底层改造方案.md)
- **前后端分离如何适配？** → [03 文档](./03-前后端分离架构说明.md)
- **架构图在哪里？** → [02 文档](./02-架构图和流程图.md)

### 我想开始写代码...

1. **后端工程师** → 直接看 [README.md 后端改造清单](./README.md#后端改造清单)
2. **前端工程师** → 直接看 [README.md 前端改造清单](./README.md#前端改造清单)

### 我想看具体的代码示例...

所有代码示例都在 [01-架构底层改造方案.md](./01-架构底层改造方案.md)：

- **数据库迁移 SQL** → 第 3.4 节
- **Repository 重构** → 第 4.2 节
- **Service 实现** → 第 4.3 节
- **Controller 实现** → 第 4.4 节
- **前端 Store** → 第 5.1 节
- **前端组件** → 第 5.2 节

---

## ⚠️ 开始前必读

### 3 个关键注意事项

1. **📦 先备份数据库**
   - 激进改造会删除表和数据
   - 必须先备份，再执行迁移脚本

2. **🔍 全局搜索 SharedWorkflow**
   - 确保删除所有 147 处引用
   - 搜索关键词：`shared_workflow`、`SharedWorkflow`、`sharedWorkflow`

3. **🧪 充分测试数据隔离**
   - 不同工作空间的数据必须完全隔离
   - 这是多租户系统的核心安全要求

---

## 📂 文件夹结构

```
改造方案文档/
├── START-HERE.md                        ← 你正在看的文件
├── README.md                            ← 开发者指南（核心）
├── 01-架构底层改造方案.md                ← 完整技术方案（核心）
├── 02-架构图和流程图.md                  ← 可视化架构图（核心）
├── 03-前后端分离架构说明.md              ← 前后端分离适配
├── 03-品牌替换指南.md                    ← 品牌替换（可选）
└── archived/                            ← 已过时文档（仅供参考）
    ├── 02-节点分类和配置策略.md
    ├── 03-节点动态化改造影响分析.md
    └── README.md
```

---

## 🆘 遇到问题？

1. **先查 [README.md](./README.md)** - 90% 的问题都有答案
2. **再查 [01-架构底层改造方案.md](./01-架构底层改造方案.md)** - 有详细的代码示例
3. **查看架构图 [02-架构图和流程图.md](./02-架构图和流程图.md)** - 可视化帮助理解
4. **在仓库提 Issue** - 描述问题、复现步骤、环境信息

---

## ✅ 准备好了？开始吧！

### 后端工程师

```bash
# 1. 先读 README 后端改造清单（10 分钟）
# 2. 精读 01 文档第 3、4 节（20 分钟）
# 3. 开始写代码

# 第一步：执行数据库迁移
# 见 01 文档第 3.4 节的完整 SQL 脚本
```

### 前端工程师

```bash
# 1. 先读 README 前端改造清单（10 分钟）
# 2. 精读 01 文档第 5 节（15 分钟）
# 3. 开始写代码

# 第一步：创建 ProjectsStore
# 见 01 文档第 5.1 节的完整代码示例
```

---

**文档版本：** v3.0
**最后更新：** 2025-11-07
**适用人群：** 所有项目成员

**下一步：** 打开 [README.md](./README.md) 查看完整的开发者指南 →
